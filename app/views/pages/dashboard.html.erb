

<div class='dashboard-container'>
<br>
  <h1><b>Bonjour <%=current_user.name%>,</b></h1>

<!-- Conso gÃ©nÃ©rale Div 1 -->

<div class='recap-conso'>
  <div class='day-conso'>
    <h2 class='title-conso'>Ma derniÃ¨re consommation</h2>
    <canvas id="myChart" data-controller="donut" data-beef=<%= @boeuf_percent %> data-chicken=<%= @chicken_percent %> data-pork=<%= @pork_percent %> data-sheep=<%= @sheep_percent %> data-fish=<%= @fish_percent %>></canvas></canvas>
<%# <canvas id="myChart" data-meats=<%= @meats.pluck(:name) data-consos = @consos %>
<%# </canvas> %>
    <div class='dashboard-buttons'>
      <%= link_to "Modifier ma saisie", edit_day_path(@day), class: "white_button btn-dashboard-pink" %>
      <a class="pink_button btn-dashboard-pink" href="/days/new">Ajouter une journÃ©e</a>
    </div>
  </div>

  <div class='dashboard-row'>
      <h2 class='title-conso-globale'>L'impact global de ma consommation</h2>
        <div class='grid-conso'>
          <div class='card card-dashboard' data-controller="popover" data-bs-toggle="popover" data-bs-trigger="hover" data-bs-placement="bottom" data-bs-content="Moyenne mondiale de litres d'eau douce utilisÃ©s par kilo de viande." >
            <div class= 'dash-card-content'>
              <div class='dash-card-text'>
                <%= image_tag("https://res.cloudinary.com/dwvsbgwap/image/upload/v1669805107/water_d8hj6l.png", width: 60, height: 60) %>
                <p><b>Consommation d'eau douce</b></p>
                <p> 25 litres</p>
              </div>
            </div>
          </div>

          <div class='card card-dashboard' data-controller="popover" data-bs-toggle="popover" data-bs-trigger="hover" data-bs-placement="bottom" data-bs-content="Moyenne mondiale d'Ã©mission de gaz Ã  effet de serre par kilo de viande. Les Ã©missions sont mesurÃ©es en kilogramme de dioxide de carbone Ã©quivalents (CO2eq) par kilo de viande.
C'est Ã  dire que les gaz autres que le CO2 sont mesurÃ©s par la quantitÃ© de rechauffement qu'ils provoquent sur une echelle de 100ans." >
            <div class='dash-card-content'>
              <div class='dash-card-text'>
                <%= image_tag("https://res.cloudinary.com/dwvsbgwap/image/upload/v1669894851/nuage_i0fay8.png", class:'dashboard-pic', width: 60, height: 60 ) %>
                <p class='titre'><b>Emission de gaz Ã  effet de serre</b></p>
                <p> 18 CO2eq</p>
              </div>
            </div>
          </div>

          <div class='card card-dashboard' data-controller="popover" data-bs-toggle="popover" data-bs-trigger="hover" data-bs-placement="bottom" data-bs-content="Moyenne mondiale de terres utilisÃ©es en mÂ² pour un kilo de viande. Par exemple, pour 1kg de boeuf seulement, 326mÂ² sont necessaires ce qui Ã©quivaut Ã  17 arbres coupÃ©s.">
            <div class='dash-card-content'>
              <div class='dash-card-text'>
                <%= image_tag("https://res.cloudinary.com/dwvsbgwap/image/upload/v1669894851/arbre_jfxahv.png", width: 60, height: 60, class:'dashboard-pic') %>
                <p class='titre'><b>DÃ©forestation</b></p>
                <p> 6 mÂ²</p>
              </div>
            </div>
          </div>

          <div class='card card-dashboard' data-controller="popover" data-bs-toggle="popover" data-bs-trigger="hover" data-bs-placement="bottom" data-bs-content="Moyenne mondiale d'eutrophisation pour un kilo de viande. L'eutrophisation est le ruissellement d'Ã©lÃ©ments nutritifs en excÃ¨s dans l'environnement et les cours d'eau environnants, qui affectent et polluent les Ã©cosystÃ¨mes.
Elle est exprimÃ©e en gramme de phosphate Ã©quivalents (POâ‚„eq) pour un kilo de viande.">
            <div class='dash-card-content'>
              <div class='dash-card-text'>
                <%= image_tag("https://res.cloudinary.com/dwvsbgwap/image/upload/v1670240319/seaweed_qvnswv.png", width: 50, height: 50, class:'dashboard-pic' ) %>
                <p class='titre'><b>Pollution de l'eau</b></p>
                <p> 3 POâ‚„eq</p>
              </div>
            </div>
          </div>
        </div>
  </div>
</div>


<!-- Compteur animaux tuÃ©s-->

  <div class='card compteur-dashboard'>
    <div class='compteur-card-content'>
      <div class='compteur-card-text'>
      <div class="compteur-animals">
        <h4 class="compteur-title">Animaux tuÃ©s dans le monde depuis votre arrivÃ©e sur cette page...</h4>
        <p class="chiffres">
        ğŸŸ <span id="count0">0</span>&nbsp;animaux marins <br />
        ğŸ“ <span id="count1">0</span>&nbsp;poulets <br />
        ğŸ¦† <span id="count2">0</span>&nbsp;canards <br />
        ğŸ– <span id="count3">0</span>&nbsp;porcs <br />
        ğŸ¦ƒ <span id="count4">0</span>&nbsp;dindes <br />
        ğŸ¦† <span id="count5">0</span>&nbsp;oies <br />
        ğŸ‘ <span id="count6">0</span>&nbsp;moutons <br />
        ğŸ„ <span id="count7">0</span>&nbsp;vaches et veaux <br /><br>
        <i>Source adaptt.org</i>
        </p>
      </div>
    </div>
  </div>
  </div>
  </div>


<!-- Conso sur 7 jours - Div 2 -->

  <div class='conso-sept'>
    <h3> Ma consommation sur 7 jours </h3>
    <div class='week-conso'>
    <% @seven_days.each do |day| %>
    <% if day.consos.pluck(:quantity).sum == 0 %>
      <div class='seven-days-green'>
        <%= day.consos.pluck(:quantity).sum %> g
      </div>
    <% elsif day.consos.pluck(:quantity).sum != nil %>
      <div class='seven-days-orange'>
        <%= day.consos.pluck(:quantity).sum %> g
      </div>
      <% elsif day.consos.pluck(:quantity).sum == nil %>
      <div class='seven-days-grey'>
        <%= day.consos.pluck(:quantity).sum %>
      </div>
    <% end %>
    <% end %>
    <!-- Compteur animaux tuÃ©s-->

              <div class='card compteur-dashboard'>
                <div class='compteur-card-content'>
                  <div class='compteur-card-text'>
                  <div class="compteur-animals">
                    <h4 class="compteur-title">Animaux tuÃ©s dans le monde depuis votre arrivÃ©e sur le site...</h4>
                    <p class="chiffres">
                    ğŸŸ <span id="count0">0</span>&nbsp;animaux marins <br />
                    ğŸ“ <span id="count1">0</span>&nbsp;poulets <br />
                    ğŸ¦† <span id="count2">0</span>&nbsp;canards <br />
                    ğŸ– <span id="count3">0</span>&nbsp;porcs <br />
                    ğŸ¦ƒ <span id="count4">0</span>&nbsp;dindes <br />
                    ğŸ¦† <span id="count5">0</span>&nbsp;oies <br />
                    ğŸ‘ <span id="count6">0</span>&nbsp;moutons <br />
                    ğŸ„ <span id="count7">0</span>&nbsp;vaches et veaux <br /><br>
                    <i>Source adaptt.org</i>
                    </p>
                  </div>
                </div>
              </div>
              </div>


      <script>
        StartKillCounter();
      </script>
      </div>
    </div>
  </div>


<!-- APIs -->

  <div class='dashboard-apis'>
    <div class='dash-api'>
      <div class='api-title'>
        <h3 class='dashboard-recettes'>IdÃ©es recettes</h3>
        <h4>API Marmiton</h4>
        <h5>Prochainement...</h5>
      </div>
    </div>

    <div class='dash-api'>
      <div class='api-title'>
      <h3 class='dashboard-tweets'>Ceci pourrait vous intÃ©resser</h3>
        <h4>API Twitter</h4>
        <h5>Prochainement...</h5>
      </div>
    </div>
  </div>

<!-- Cards associations -->

    <h3 class='dashboard-assos'>Associations</h3>
  <div class='cards-associations'>
    <% @assos.each do |asso| %>
      <div class="card">
            <div class="image-container image-container-asso">
              <% if asso.photo.attached? %>
              <%= cl_image_tag asso.photo.key, crop: :fill, class:'image-card image-card-asso' %>
              <% else %>
              <%= image_tag "images/logo.png", alt: "associations" %>
              <% end %>
              <div class="petite-div-text">
              <h5 class="card-title"><%= asso.name%></h5>
              <p class="card-text"><%= asso.description%></p></div>
            </div>
              <a href="<%= asso.url%>" target="_blank" class="btn btn-dashboard-pink pink_button">Visiter le site</a>
            <%# <div class="card-body">
            </div> %>
        </div>
    <% end %>
  </div>
</div>
    <%# <script src="https://unpkg.com/@adminkit/core@latest/dist/js/app.js"></script> %>

<%# Compteur animaux  %>
